<iframe
  src="data:text/html;base64,PGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CiAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgICAgIGh0bWwsIGJvZHl7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAgICAgPHNjcmlwdCB0eXBlPSJpbXBvcnRtYXAiPgp7CiAgICAiaW1wb3J0cyI6IHsKICAgICAgICAicmVhY3QiOiAiaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvcmVhY3RAMTguMC4yIiwKICAgICAgICAicmVhY3QtZG9tIjogImh0dHBzOi8vY2RuLnNreXBhY2suZGV2L3JlYWN0LWRvbUAxOC4wLjIiLAogICAgICAgICJ0aHJlZSI6ICJodHRwczovL2Nkbi5za3lwYWNrLmRldi90aHJlZUAwLjE0OC4wIiwKICAgICAgICAicmVhY3QtdGhyZWUvZmliZXIiOiAiaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvQHJlYWN0LXRocmVlL2ZpYmVyQDcuMC4yNCIKICAgIH0KfQo8L3NjcmlwdD4KPHN0eWxlPgogICAgaHRtbCwgYm9keXsKICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgcGFkZGluZzogMDsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgYm9yZGVyOiAwOwogICAgfQogICAgLm50LWVtYmVkewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGhlaWdodDogMTAwJTsKICAgIH0KICAgIC5udC1lbWJlZCBjYW52YXN7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgfQo8L3N0eWxlPgo8c2NyaXB0IHR5cGU9Im1vZHVsZSI+CiAgICBpbXBvcnQgUmVhY3QsIHt1c2VSZWYsdXNlTWVtb30gZnJvbSAncmVhY3QnOwogICAgaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7CiAgICBpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7CiAgICBpbXBvcnQge0NhbnZhcywgdXNlRnJhbWUsIHVzZVRocmVlfSBmcm9tICdyZWFjdC10aHJlZS9maWJlcic7CgogICAgbGV0IGVtYmVkUm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgZW1iZWRSb290LmNsYXNzTmFtZSA9ICJudC1lbWJlZCI7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVtYmVkUm9vdCk7CgogICAgY29uc3QgVGV4dHVyZU1lc2ggPSAoKSA9PiB7CiAgICAgICAgY29uc3QgbWVzaCA9IHVzZVJlZihudWxsKQogICAgICAgIHVzZUZyYW1lKHN0YXRlID0+IHsKICAgICAgICAgICAgY29uc3QgeyBjbG9jaywgbW91c2UsIGdsLCBzY2VuZSwgY2FtZXJhIH0gPSBzdGF0ZQogICAgICAgICAgICBpZihtZXNoLmN1cnJlbnQpewogICAgICAgICAgICAgICAgbWVzaC5jdXJyZW50Lm1hdGVyaWFsLnVuaWZvcm1zLnVfbW91c2UudmFsdWUgPSBbbW91c2UueCAvIDIgKyAwLjUsIG1vdXNlLnkgLyAyICsgMC41XQogICAgICAgICAgICAgICAgbWVzaC5jdXJyZW50Lm1hdGVyaWFsLnVuaWZvcm1zLnVfdGltZS52YWx1ZSA9IGNsb2NrLmdldEVsYXBzZWRUaW1lKCkKICAgICAgICAgICAgICAgIGxldCBjID0gZ2wuZG9tRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQogICAgICAgICAgICAgICAgbWVzaC5jdXJyZW50Lm1hdGVyaWFsLnVuaWZvcm1zLnVfcmVzb2x1dGlvbi52YWx1ZSA9IFtjLndpZHRoLGMuaGVpZ2h0XQogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAKICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnbWVzaCcsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHJlZjptZXNoLAogICAgICAgICAgICAgICAgcG9zaXRpb246IFswLDAsMF0sCiAgICAgICAgICAgICAgICBzY2FsZTogMSwKICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBbMCwwLDBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3BsYW5lR2VvbWV0cnknLHthcmdzOlsyNDAsNTgwXX0pLCAKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc2hhZGVyTWF0ZXJpYWwnLHsKICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBgCgogICAgdW5pZm9ybSB2ZWMyIHVfcmVzb2x1dGlvbjsKCiAgICB1bmlmb3JtIHZlYzMgdV9jb2xvcjsgLy9yYW5kb206dHJ1ZQoKICAgIHVuaWZvcm0gYm9vbCB1X2NvbG9yX3JhbmRvbTsgLy9pZ25vcmU6dHJ1ZQoKICAgIHVuaWZvcm0gZmxvYXQgdV9zaXplOyAvL3VuaXRzOnB4LCBtaW46MSwgbWF4OiAyNTYsIHN0ZXA6MQoKICAgIHVuaWZvcm0gZmxvYXQgdV92aWduZXR0ZTsgLy91bml0czolLCBzdGVwOjAuMDAxCgogICAgdW5pZm9ybSBmbG9hdCB1X2Ftb3VudDsgLy91bml0czolCgogICAgdW5pZm9ybSBib29sIHVfb3BhY2l0eV9yYW5kb207IC8vaWdub3JlOnRydWUKCiAgICB1bmlmb3JtIGZsb2F0IHVfcm90YXRpb247IC8vdW5pdHM6sCwgbWluOjAsIG1heDozNjAsIHN0ZXA6MSwgcmFuZG9tOnRydWUKCiAgICB1bmlmb3JtIGJvb2wgdV9yb3RhdGlvbl9yYW5kb207IC8vaWdub3JlOnRydWUKCiAgICB1bmlmb3JtIGJvb2wgdV9zaGFwZVs3XTsKCiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1X3NoYXBlX2ltYWdlOwoKICAgIHVuaWZvcm0gdmVjMiB1X3NoYXBlX2ltYWdlX3Jlc29sdXRpb247IC8vaWdub3JlOnRydWUKCiAgICB1bmlmb3JtIGZsb2F0IHVfcmFuZG9tX3NlZWQ7IC8vaWdub3JlOnRydWUKCiAgICB1bmlmb3JtIGZsb2F0IHVfYWFfcGFzc2VzOyAvL2lnbm9yZTp0cnVlCgoKCiAgICBmbG9hdCB2aWduZXR0ZShmbG9hdCBhbW91bnQpewoKICAgICAgICAgIHZlYzIgcG9zaXRpb24gPSAoZ2xfRnJhZ0Nvb3JkLnh5IC8gdV9yZXNvbHV0aW9uKSAtIHZlYzIoMC41KTsKCiAgICAgICAgICBmbG9hdCBkaXN0ID0gbGVuZ3RoKHBvc2l0aW9uICogdmVjMih1X3Jlc29sdXRpb24ueC91X3Jlc29sdXRpb24ueSwgMS4wKSk7CgoKCiAgICAgICAgICBmbG9hdCByYWRpdXMgPSAxLjAqYW1vdW50OwoKICAgICAgICAgIGZsb2F0IHNvZnRuZXNzID0gMS4wLXJhZGl1czsKCiAgICAgICAgICBmbG9hdCB2ID0gc21vb3Roc3RlcChyYWRpdXMsIHJhZGl1cyAtIHNvZnRuZXNzLCBkaXN0KTsKCgoKICAgICAgICAgIHJldHVybiB2OwoKICAgICAgfQoKCgogICAgZmxvYXQgYXNwZWN0U2NhbGUoaW5vdXQgdmVjMiBzdCxmbG9hdCB4UmVzLCBmbG9hdCB5UmVzKXsKCiAgICAgICAgZmxvYXQgYXNwZWN0ID0geFJlcy95UmVzOwoKICAgICAgICBmbG9hdCBkaWZmID0gKDEuMCAtIGFzcGVjdCkvMi4wOwoKICAgICAgICBmbG9hdCB2aXMgPSAxLjA7CgoKCiAgICAgICAgaWYoYXNwZWN0ID4gMS4pewoKICAgICAgICBzdC55ICo9IGFzcGVjdDsKCiAgICAgICAgc3QueSArPSBkaWZmOwoKICAgICAgICB2aXMgPSAoMS4wIC0gc3RlcCgxLjAsc3QueSkpICogKHN0ZXAoMC4wLHN0LnkpKSAqICgxLjAgLSBzdGVwKDEuMCxzdC54KSkgKiAoc3RlcCgwLjAsc3QueCkpOwoKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgc3QueCAqPSB5UmVzL3hSZXM7CgogICAgICAgICAgICBzdC54ICs9ICgxLjAgLSB5UmVzL3hSZXMpLzIuMDsKCiAgICAgICAgICAgIHZpcyA9ICgxLjAgLSBzdGVwKDEuMCxzdC54KSkgKihzdGVwKDAuMCxzdC54KSkgKiAoMS4wIC0gc3RlcCgxLjAsc3QueSkpICooc3RlcCgwLjAsc3QueSkpOwoKICAgICAgICB9CgogICAgICAgIHJldHVybiB2aXM7CgogICAgfQoKCgogICAgaGlnaHAgZmxvYXQgcmFuZCh2ZWMyIGNvKQoKICAgIHsKCiAgICAgICAgaGlnaHAgZmxvYXQgYSA9IDEyLjk4OTg7CgogICAgICAgIGhpZ2hwIGZsb2F0IGIgPSA3OC4yMzM7CgogICAgICAgIGhpZ2hwIGZsb2F0IGMgPSA0Mzc1OC41NDUzOwoKICAgICAgICBoaWdocCBmbG9hdCBkdD0gZG90KGNvLnh5ICx2ZWMyKGEsYikpOwoKICAgICAgICBoaWdocCBmbG9hdCBzbj0gbW9kKGR0LDMuMTQpOwoKICAgICAgICByZXR1cm4gZnJhY3Qoc2luKHNuKSAqIGMpOwoKICAgIH0KCgoKICAgICNpZm5kZWYgUEkKCiAgICAjZGVmaW5lIFBJIDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NQoKICAgICNlbmRpZgoKCgoKCgojaWZuZGVmIEZOQ19BQVNURVAKI2RlZmluZSBGTkNfQUFTVEVQCiNpZiBkZWZpbmVkKEdMX09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcykKI2V4dGVuc2lvbiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMgOiBlbmFibGUKI2VuZGlmCmZsb2F0IGFhc3RlcChmbG9hdCB0aHJlc2hvbGQsIGZsb2F0IHZhbHVlKSB7CiNpZiAhZGVmaW5lZChHTF9FUykgfHwgX19WRVJTSU9OX18gPj0gMzAwIHx8IGRlZmluZWQoR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzKQogICAgZmxvYXQgYWZ3aWR0aCA9IDAuNyAqIGxlbmd0aCh2ZWMyKGRGZHgodmFsdWUpLCBkRmR5KHZhbHVlKSkpOwogICAgcmV0dXJuIHNtb290aHN0ZXAodGhyZXNob2xkLWFmd2lkdGgsIHRocmVzaG9sZCthZndpZHRoLCB2YWx1ZSk7CiNlbGlmIGRlZmluZWQoQUFfRURHRSkKICAgIGZsb2F0IGFmd2lkdGggPSBBQV9FREdFOwogICAgcmV0dXJuIHNtb290aHN0ZXAodGhyZXNob2xkLWFmd2lkdGgsIHRocmVzaG9sZCthZndpZHRoLCB2YWx1ZSk7CiNlbHNlIAogICAgcmV0dXJuIHN0ZXAodGhyZXNob2xkLCB2YWx1ZSk7CiNlbmRpZgp9CiNlbmRpZgoKI2lmbmRlZiBGTkNfRklMTAojZGVmaW5lIEZOQ19GSUxMCmZsb2F0IGZpbGwoZmxvYXQgeCwgZmxvYXQgc2l6ZSwgZmxvYXQgZWRnZSkgewogICAgcmV0dXJuIDEuMCAtIHNtb290aHN0ZXAoc2l6ZSAtIGVkZ2UsIHNpemUgKyBlZGdlLCB4KTsKfQpmbG9hdCBmaWxsKGZsb2F0IHgsIGZsb2F0IHNpemUpIHsKICAgIHJldHVybiAxLjAgLSBhYXN0ZXAoc2l6ZSwgeCk7Cn0KI2VuZGlmCgoKCgojaWZuZGVmIEZOQ19UUklTREYKI2RlZmluZSBGTkNfVFJJU0RGCmZsb2F0IHRyaVNERihpbiB2ZWMyIHN0KSB7CiNpZmRlZiBDRU5URVJfMkQKICAgIHN0IC09IENFTlRFUl8yRDsKICAgIHN0ICo9IDUuMDsKI2Vsc2UKICAgIHN0IC09IDAuNTsKICAgIHN0ICo9IDUuMDsKI2VuZGlmCiAgICByZXR1cm4gbWF4KGFicyhzdC54KSAqIC44NjYwMjUgKyBzdC55ICogLjUsIC1zdC55ICogMC41KTsKfQojZW5kaWYKCgoKCiNpZm5kZWYgRk5DX0hFWFNERgojZGVmaW5lIEZOQ19IRVhTREYKZmxvYXQgaGV4U0RGKGluIHZlYzIgc3QpIHsKI2lmZGVmIENFTlRFUl8yRAogICAgc3QgLT0gQ0VOVEVSXzJEOwogICAgc3QgKj0gMi4wOwojZWxzZQogICAgc3QgPSBzdCAqIDIuMCAtIDEuMDsKI2VuZGlmCiAgICBzdCA9IGFicyhzdCk7CiAgICByZXR1cm4gbWF4KGFicyhzdC55KSwgc3QueCAqIC44NjYwMjUgKyBzdC55ICogLjUpOwp9CiNlbmRpZgoKCgojaWZuZGVmIFFUUl9QSQojZGVmaW5lIFFUUl9QSSAwLjc4NTM5ODE2MzM5CiNlbmRpZgojaWZuZGVmIEhBTEZfUEkKI2RlZmluZSBIQUxGX1BJIDEuNTcwNzk2MzI2Nzk0ODk2NjE5MjMxMzIxNjkxNjM5OAojZW5kaWYKI2lmbmRlZiBQSQojZGVmaW5lIFBJIDMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NQojZW5kaWYKI2lmbmRlZiBUV09fUEkKI2RlZmluZSBUV09fUEkgNi4yODMxODUzMDcxNzk1ODY0NzY5MjUyODY3NjY1NTkwCiNlbmRpZgojaWZuZGVmIFRBVQojZGVmaW5lIFRBVSA2LjI4MzE4NTMwNzE3OTU4NjQ3NjkyNTI4Njc2NjU1OTAKI2VuZGlmCiNpZm5kZWYgSU5WX1BJCiNkZWZpbmUgSU5WX1BJIDAuMzE4MzA5ODg2MTgzNzkwNjcxNTM3NzY3NTI2NzQ1MDMKI2VuZGlmCiNpZm5kZWYgSU5WX1NRUlRfVEFVCiNkZWZpbmUgSU5WX1NRUlRfVEFVIDAuMzk4OTQyMjgwNDAxNDMyNjc3OTM5OTQ2MDU5OTM0MzkgIAojZW5kaWYKI2lmbmRlZiBTUVJUX0hBTEZfUEkKI2RlZmluZSBTUVJUX0hBTEZfUEkgMS4yNTMzMTQxMzczMgojZW5kaWYKI2lmbmRlZiBQSEkKI2RlZmluZSBQSEkgMS42MTgwMzM5ODg3NDk4OTQ4NDgyMDQ1ODY4MzQKI2VuZGlmCiNpZm5kZWYgRVBTSUxPTgojZGVmaW5lIEVQU0lMT04gMC4wMDAwMDAxCiNlbmRpZgojaWZuZGVmIEdPTERFTl9SQVRJTwojZGVmaW5lIEdPTERFTl9SQVRJTyAxLjYxODAzMzk4ODcKI2VuZGlmCiNpZm5kZWYgR09MREVOX1JBVElPX0NPTkpVR0FURSAKI2RlZmluZSBHT0xERU5fUkFUSU9fQ09OSlVHQVRFIDAuNjE4MDMzOTg4NzUKI2VuZGlmCiNpZm5kZWYgR09MREVOX0FOR0xFIAojZGVmaW5lIEdPTERFTl9BTkdMRSAyLjM5OTk2MzIzCiNlbmRpZgoKCiNpZm5kZWYgRk5DX1NDQUxFCiNkZWZpbmUgRk5DX1NDQUxFCnZlYzIgc2NhbGUoaW4gZmxvYXQgc3QsIGluIGZsb2F0IHMsIGluIHZlYzIgY2VudGVyKSB7IHJldHVybiAoc3QgLSBjZW50ZXIpICogcyArIGNlbnRlcjsgfQp2ZWMyIHNjYWxlKGluIGZsb2F0IHN0LCBpbiBmbG9hdCBzKSB7CiNpZmRlZiBDRU5URVJfMkQKICAgIHJldHVybiBzY2FsZShzdCwgIHMsIENFTlRFUl8yRCk7CiNlbHNlCiAgICByZXR1cm4gc2NhbGUoc3QsICBzLCB2ZWMyKDAuNSkpOwojZW5kaWYKfQp2ZWMyIHNjYWxlKGluIHZlYzIgc3QsIGluIHZlYzIgcywgaW4gdmVjMiBjZW50ZXIpIHsgcmV0dXJuIChzdCAtIGNlbnRlcikgKiBzICsgY2VudGVyOyB9CnZlYzIgc2NhbGUoaW4gdmVjMiBzdCwgaW4gZmxvYXQgcywgaW4gdmVjMiBjZW50ZXIpIHsgcmV0dXJuIHNjYWxlKHN0LCB2ZWMyKHMpLCBjZW50ZXIpOyB9CnZlYzIgc2NhbGUoaW4gdmVjMiBzdCwgaW4gdmVjMiBzKSB7CiNpZmRlZiBDRU5URVJfMkQKICAgIHJldHVybiAoc3QgLSBDRU5URVJfMkQpICogcyArIENFTlRFUl8yRDsKI2Vsc2UKICAgIHJldHVybiAoc3QgLSAwLjUpICogcyArIDAuNTsKI2VuZGlmCn0KdmVjMiBzY2FsZShpbiB2ZWMyIHN0LCBpbiBmbG9hdCBzKSB7CiNpZmRlZiBDRU5URVJfMkQKICAgIHJldHVybiAoc3QgLSBDRU5URVJfMkQpICogcyArIENFTlRFUl8yRDsKI2Vsc2UKICAgIHJldHVybiAoc3QgLSAwLjUpICogcyArIDAuNTsKI2VuZGlmCn0KdmVjMyBzY2FsZShpbiB2ZWMzIHN0LCBpbiB2ZWMzIHMsIGluIHZlYzMgY2VudGVyKSB7IHJldHVybiAoc3QgLSBjZW50ZXIpICogcyArIGNlbnRlcjsgfQp2ZWMzIHNjYWxlKGluIHZlYzMgc3QsIGluIGZsb2F0IHMsIGluIHZlYzMgY2VudGVyKSB7IHJldHVybiAoc3QgLSBjZW50ZXIpICogcyArIGNlbnRlcjsgfQp2ZWMzIHNjYWxlKGluIHZlYzMgc3QsIGluIHZlYzMgcykgewojaWZkZWYgQ0VOVEVSXzNECiAgICByZXR1cm4gKHN0IC0gQ0VOVEVSXzNEKSAqIHMgKyBDRU5URVJfM0Q7CiNlbHNlCiAgICByZXR1cm4gKHN0IC0gMC41KSAqIHMgKyAwLjU7CiNlbmRpZgp9CnZlYzMgc2NhbGUoaW4gdmVjMyBzdCwgaW4gZmxvYXQgcykgewojaWZkZWYgQ0VOVEVSXzNECiAgICByZXR1cm4gKHN0IC0gQ0VOVEVSXzNEKSAqIHMgKyBDRU5URVJfM0Q7CiNlbHNlCiAgICByZXR1cm4gKHN0IC0gMC41KSAqIHMgKyAwLjU7CiNlbmRpZgp9Cgp2ZWM0IHNjYWxlKGluIHZlYzQgc3QsIGZsb2F0IHMpIHsgcmV0dXJuIHZlYzQoc2NhbGUoc3QueHksIHMpLCBzdC56dyk7IH0KdmVjNCBzY2FsZShpbiB2ZWM0IHN0LCB2ZWMyIHMpIHsgcmV0dXJuIHZlYzQoc2NhbGUoc3QueHksIHMpLCBzdC56dyk7IH0KI2VuZGlmCgoKI2lmbmRlZiBGTkNfU1RBUlNERgojZGVmaW5lIEZOQ19TVEFSU0RGCmZsb2F0IHN0YXJTREYoaW4gdmVjMiBzdCwgaW4gaW50IFYsIGluIGZsb2F0IHMpIHsKI2lmZGVmIENFTlRFUl8yRAogICAgc3QgLT0gQ0VOVEVSXzJEOwojZWxzZQogICAgc3QgLT0gMC41OwojZW5kaWYKICAgIHN0ICo9IDIuMDsKICAgIGZsb2F0IGEgPSBhdGFuKHN0LnksIHN0LngpIC8gVEFVOwogICAgZmxvYXQgc2VnID0gYSAqIGZsb2F0KFYpOwogICAgYSA9ICgoZmxvb3Ioc2VnKSArIDAuNSkgLyBmbG9hdChWKSArCiAgICAgICAgbWl4KHMsIC1zLCBzdGVwKDAuNSwgZnJhY3Qoc2VnKSkpKQogICAgICAgICogVEFVOwogICAgcmV0dXJuIGFicyhkb3QodmVjMihjb3MoYSksIHNpbihhKSksCiAgICAgICAgICAgICAgICAgICBzdCkpOwp9CmZsb2F0IHN0YXJTREYoaW4gdmVjMiBzdCwgaW4gaW50IFYpIHsKICAgIHJldHVybiBzdGFyU0RGKCBzY2FsZShzdCwgMTIuMC9mbG9hdChWKSksIFYsIDAuMSk7Cn0KI2VuZGlmCgoKCgojaWZuZGVmIEZOQ19SRUNUU0RGCiNkZWZpbmUgRk5DX1JFQ1RTREYKZmxvYXQgcmVjdFNERih2ZWMyIHAsIHZlYzIgYiwgZmxvYXQgcikgewogICAgdmVjMiBkID0gYWJzKHAgLSAwLjUpICogNC4yIC0gYiArIHZlYzIocik7CiAgICByZXR1cm4gbWluKG1heChkLngsIGQueSksIDAuMCkgKyBsZW5ndGgobWF4KGQsIDAuMCkpIC0gcjsgICAKfQpmbG9hdCByZWN0U0RGKHZlYzIgcCwgZmxvYXQgYiwgZmxvYXQgcikgewogICAgcmV0dXJuIHJlY3RTREYocCwgdmVjMihiKSwgcik7Cn0KZmxvYXQgcmVjdFNERihpbiB2ZWMyIHN0LCBpbiB2ZWMyIHMpIHsKICAgICNpZmRlZiBDRU5URVJfMkQKICAgICAgICBzdCAtPSBDRU5URVJfMkQ7CiAgICAgICAgc3QgKj0gMi4wOwogICAgI2Vsc2UKICAgICAgICBzdCA9IHN0ICogMi4wIC0gMS4wOwogICAgI2VuZGlmCiAgICByZXR1cm4gbWF4KCBhYnMoc3QueCAvIHMueCksCiAgICAgICAgICAgICAgICBhYnMoc3QueSAvIHMueSkgKTsKfQpmbG9hdCByZWN0U0RGKGluIHZlYzIgc3QsIGluIGZsb2F0IHMpIHsKICAgIHJldHVybiByZWN0U0RGKHN0LCB2ZWMyKHMpICk7Cn0KZmxvYXQgcmVjdFNERihpbiB2ZWMyIHN0KSB7CiAgICByZXR1cm4gcmVjdFNERihzdCwgdmVjMigxLjApKTsKfQojZW5kaWYKCgoKI2lmbmRlZiBRVFJfUEkKI2RlZmluZSBRVFJfUEkgMC43ODUzOTgxNjMzOQojZW5kaWYKI2lmbmRlZiBIQUxGX1BJCiNkZWZpbmUgSEFMRl9QSSAxLjU3MDc5NjMyNjc5NDg5NjYxOTIzMTMyMTY5MTYzOTgKI2VuZGlmCiNpZm5kZWYgUEkKI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTUKI2VuZGlmCiNpZm5kZWYgVFdPX1BJCiNkZWZpbmUgVFdPX1BJIDYuMjgzMTg1MzA3MTc5NTg2NDc2OTI1Mjg2NzY2NTU5MAojZW5kaWYKI2lmbmRlZiBUQVUKI2RlZmluZSBUQVUgNi4yODMxODUzMDcxNzk1ODY0NzY5MjUyODY3NjY1NTkwCiNlbmRpZgojaWZuZGVmIElOVl9QSQojZGVmaW5lIElOVl9QSSAwLjMxODMwOTg4NjE4Mzc5MDY3MTUzNzc2NzUyNjc0NTAzCiNlbmRpZgojaWZuZGVmIElOVl9TUVJUX1RBVQojZGVmaW5lIElOVl9TUVJUX1RBVSAwLjM5ODk0MjI4MDQwMTQzMjY3NzkzOTk0NjA1OTkzNDM5ICAKI2VuZGlmCiNpZm5kZWYgU1FSVF9IQUxGX1BJCiNkZWZpbmUgU1FSVF9IQUxGX1BJIDEuMjUzMzE0MTM3MzIKI2VuZGlmCiNpZm5kZWYgUEhJCiNkZWZpbmUgUEhJIDEuNjE4MDMzOTg4NzQ5ODk0ODQ4MjA0NTg2ODM0CiNlbmRpZgojaWZuZGVmIEVQU0lMT04KI2RlZmluZSBFUFNJTE9OIDAuMDAwMDAwMQojZW5kaWYKI2lmbmRlZiBHT0xERU5fUkFUSU8KI2RlZmluZSBHT0xERU5fUkFUSU8gMS42MTgwMzM5ODg3CiNlbmRpZgojaWZuZGVmIEdPTERFTl9SQVRJT19DT05KVUdBVEUgCiNkZWZpbmUgR09MREVOX1JBVElPX0NPTkpVR0FURSAwLjYxODAzMzk4ODc1CiNlbmRpZgojaWZuZGVmIEdPTERFTl9BTkdMRSAKI2RlZmluZSBHT0xERU5fQU5HTEUgMi4zOTk5NjMyMwojZW5kaWYKCgojaWZuZGVmIEZOQ19TQ0FMRQojZGVmaW5lIEZOQ19TQ0FMRQp2ZWMyIHNjYWxlKGluIGZsb2F0IHN0LCBpbiBmbG9hdCBzLCBpbiB2ZWMyIGNlbnRlcikgeyByZXR1cm4gKHN0IC0gY2VudGVyKSAqIHMgKyBjZW50ZXI7IH0KdmVjMiBzY2FsZShpbiBmbG9hdCBzdCwgaW4gZmxvYXQgcykgewojaWZkZWYgQ0VOVEVSXzJECiAgICByZXR1cm4gc2NhbGUoc3QsICBzLCBDRU5URVJfMkQpOwojZWxzZQogICAgcmV0dXJuIHNjYWxlKHN0LCAgcywgdmVjMigwLjUpKTsKI2VuZGlmCn0KdmVjMiBzY2FsZShpbiB2ZWMyIHN0LCBpbiB2ZWMyIHMsIGluIHZlYzIgY2VudGVyKSB7IHJldHVybiAoc3QgLSBjZW50ZXIpICogcyArIGNlbnRlcjsgfQp2ZWMyIHNjYWxlKGluIHZlYzIgc3QsIGluIGZsb2F0IHMsIGluIHZlYzIgY2VudGVyKSB7IHJldHVybiBzY2FsZShzdCwgdmVjMihzKSwgY2VudGVyKTsgfQp2ZWMyIHNjYWxlKGluIHZlYzIgc3QsIGluIHZlYzIgcykgewojaWZkZWYgQ0VOVEVSXzJECiAgICByZXR1cm4gKHN0IC0gQ0VOVEVSXzJEKSAqIHMgKyBDRU5URVJfMkQ7CiNlbHNlCiAgICByZXR1cm4gKHN0IC0gMC41KSAqIHMgKyAwLjU7CiNlbmRpZgp9CnZlYzIgc2NhbGUoaW4gdmVjMiBzdCwgaW4gZmxvYXQgcykgewojaWZkZWYgQ0VOVEVSXzJECiAgICByZXR1cm4gKHN0IC0gQ0VOVEVSXzJEKSAqIHMgKyBDRU5URVJfMkQ7CiNlbHNlCiAgICByZXR1cm4gKHN0IC0gMC41KSAqIHMgKyAwLjU7CiNlbmRpZgp9CnZlYzMgc2NhbGUoaW4gdmVjMyBzdCwgaW4gdmVjMyBzLCBpbiB2ZWMzIGNlbnRlcikgeyByZXR1cm4gKHN0IC0gY2VudGVyKSAqIHMgKyBjZW50ZXI7IH0KdmVjMyBzY2FsZShpbiB2ZWMzIHN0LCBpbiBmbG9hdCBzLCBpbiB2ZWMzIGNlbnRlcikgeyByZXR1cm4gKHN0IC0gY2VudGVyKSAqIHMgKyBjZW50ZXI7IH0KdmVjMyBzY2FsZShpbiB2ZWMzIHN0LCBpbiB2ZWMzIHMpIHsKI2lmZGVmIENFTlRFUl8zRAogICAgcmV0dXJuIChzdCAtIENFTlRFUl8zRCkgKiBzICsgQ0VOVEVSXzNEOwojZWxzZQogICAgcmV0dXJuIChzdCAtIDAuNSkgKiBzICsgMC41OwojZW5kaWYKfQp2ZWMzIHNjYWxlKGluIHZlYzMgc3QsIGluIGZsb2F0IHMpIHsKI2lmZGVmIENFTlRFUl8zRAogICAgcmV0dXJuIChzdCAtIENFTlRFUl8zRCkgKiBzICsgQ0VOVEVSXzNEOwojZWxzZQogICAgcmV0dXJuIChzdCAtIDAuNSkgKiBzICsgMC41OwojZW5kaWYKfQoKdmVjNCBzY2FsZShpbiB2ZWM0IHN0LCBmbG9hdCBzKSB7IHJldHVybiB2ZWM0KHNjYWxlKHN0Lnh5LCBzKSwgc3QuencpOyB9CnZlYzQgc2NhbGUoaW4gdmVjNCBzdCwgdmVjMiBzKSB7IHJldHVybiB2ZWM0KHNjYWxlKHN0Lnh5LCBzKSwgc3QuencpOyB9CiNlbmRpZgoKCiNpZm5kZWYgRk5DX1NUQVJTREYKI2RlZmluZSBGTkNfU1RBUlNERgpmbG9hdCBzdGFyU0RGKGluIHZlYzIgc3QsIGluIGludCBWLCBpbiBmbG9hdCBzKSB7CiNpZmRlZiBDRU5URVJfMkQKICAgIHN0IC09IENFTlRFUl8yRDsKI2Vsc2UKICAgIHN0IC09IDAuNTsKI2VuZGlmCiAgICBzdCAqPSAyLjA7CiAgICBmbG9hdCBhID0gYXRhbihzdC55LCBzdC54KSAvIFRBVTsKICAgIGZsb2F0IHNlZyA9IGEgKiBmbG9hdChWKTsKICAgIGEgPSAoKGZsb29yKHNlZykgKyAwLjUpIC8gZmxvYXQoVikgKwogICAgICAgIG1peChzLCAtcywgc3RlcCgwLjUsIGZyYWN0KHNlZykpKSkKICAgICAgICAqIFRBVTsKICAgIHJldHVybiBhYnMoZG90KHZlYzIoY29zKGEpLCBzaW4oYSkpLAogICAgICAgICAgICAgICAgICAgc3QpKTsKfQpmbG9hdCBzdGFyU0RGKGluIHZlYzIgc3QsIGluIGludCBWKSB7CiAgICByZXR1cm4gc3RhclNERiggc2NhbGUoc3QsIDEyLjAvZmxvYXQoVikpLCBWLCAwLjEpOwp9CiNlbmRpZgoKCgoKI2lmbmRlZiBDSVJDTEVTREZfRk5DCiNkZWZpbmUgQ0lSQ0xFU0RGX0ZOQyhQT1NfVVYpIGxlbmd0aChQT1NfVVYpCiNlbmRpZgojaWZuZGVmIEZOQ19DSVJDTEVTREYKI2RlZmluZSBGTkNfQ0lSQ0xFU0RGCmZsb2F0IGNpcmNsZVNERihpbiB2ZWMyIHYpIHsKI2lmZGVmIENFTlRFUl8yRAogICAgdiAtPSBDRU5URVJfMkQ7CiNlbHNlCiAgICB2IC09IDAuNTsKI2VuZGlmCiAgICByZXR1cm4gQ0lSQ0xFU0RGX0ZOQyh2KSAqIDIuMDsKfQojZW5kaWYKCgoKCiNpZiAhZGVmaW5lZChGTkNfU0FUVVJBVEUpICYmICFkZWZpbmVkKHNhdHVyYXRlKQojZGVmaW5lIEZOQ19TQVRVUkFURQojZGVmaW5lIHNhdHVyYXRlKFYpIGNsYW1wKFYsIDAuMCwgMS4wKQojZW5kaWYKCiNpZm5kZWYgRk5DX0xJTkVTREYKI2RlZmluZSBGTkNfTElORVNERgpmbG9hdCBsaW5lU0RGKCBpbiB2ZWMyIHN0LCBpbiB2ZWMyIGEsIGluIHZlYzIgYiApIHsKICAgIHZlYzIgYl90b19hID0gYiAtIGE7CiAgICB2ZWMyIHRvX2EgPSBzdCAtIGE7CiAgICBmbG9hdCBoID0gc2F0dXJhdGUoZG90KHRvX2EsIGJfdG9fYSkvZG90KGJfdG9fYSwgYl90b19hKSk7CiAgICByZXR1cm4gbGVuZ3RoKHRvX2EgLSBoICogYl90b19hICk7Cn0KZmxvYXQgbGluZVNERih2ZWMzIHAsIHZlYzMgYSwgdmVjMyBiKSB7CiAgICAKICAgIHJldHVybiBsZW5ndGgoY3Jvc3MocCAtIGEsIHAgLSBiKSkvbGVuZ3RoKGIgLSBhKTsKfQojZW5kaWYKCgoKCiNpZm5kZWYgRk5DX1JFQ1RTREYKI2RlZmluZSBGTkNfUkVDVFNERgpmbG9hdCByZWN0U0RGKHZlYzIgcCwgdmVjMiBiLCBmbG9hdCByKSB7CiAgICB2ZWMyIGQgPSBhYnMocCAtIDAuNSkgKiA0LjIgLSBiICsgdmVjMihyKTsKICAgIHJldHVybiBtaW4obWF4KGQueCwgZC55KSwgMC4wKSArIGxlbmd0aChtYXgoZCwgMC4wKSkgLSByOyAgIAp9CmZsb2F0IHJlY3RTREYodmVjMiBwLCBmbG9hdCBiLCBmbG9hdCByKSB7CiAgICByZXR1cm4gcmVjdFNERihwLCB2ZWMyKGIpLCByKTsKfQpmbG9hdCByZWN0U0RGKGluIHZlYzIgc3QsIGluIHZlYzIgcykgewogICAgI2lmZGVmIENFTlRFUl8yRAogICAgICAgIHN0IC09IENFTlRFUl8yRDsKICAgICAgICBzdCAqPSAyLjA7CiAgICAjZWxzZQogICAgICAgIHN0ID0gc3QgKiAyLjAgLSAxLjA7CiAgICAjZW5kaWYKICAgIHJldHVybiBtYXgoIGFicyhzdC54IC8gcy54KSwKICAgICAgICAgICAgICAgIGFicyhzdC55IC8gcy55KSApOwp9CmZsb2F0IHJlY3RTREYoaW4gdmVjMiBzdCwgaW4gZmxvYXQgcykgewogICAgcmV0dXJuIHJlY3RTREYoc3QsIHZlYzIocykgKTsKfQpmbG9hdCByZWN0U0RGKGluIHZlYzIgc3QpIHsKICAgIHJldHVybiByZWN0U0RGKHN0LCB2ZWMyKDEuMCkpOwp9CiNlbmRpZgoKCiNpZm5kZWYgRk5DX0NST1NTU0RGCiNkZWZpbmUgRk5DX0NST1NTU0RGCmZsb2F0IGNyb3NzU0RGKGluIHZlYzIgc3QsIGluIGZsb2F0IHMpIHsKICAgIHZlYzIgc2l6ZSA9IHZlYzIoLjI1LCBzKTsKICAgIHJldHVybiBtaW4ocmVjdFNERihzdC54eSwgc2l6ZS54eSksCiAgICAgICAgICAgICAgIHJlY3RTREYoc3QueHksIHNpemUueXgpKTsKfQojZW5kaWYKCgoKCiNpZm5kZWYgRk5DX1JPVEFURTJECiNkZWZpbmUgRk5DX1JPVEFURTJECm1hdDIgcm90YXRlMmQoaW4gZmxvYXQgcil7CiAgICBmbG9hdCBjID0gY29zKHIpOwogICAgZmxvYXQgcyA9IHNpbihyKTsKICAgIHJldHVybiBtYXQyKGMsIC1zLCBzLCBjKTsKfQojZW5kaWYKCgojaWZuZGVmIEZOQ19ST1RBVEU0RAojZGVmaW5lIEZOQ19ST1RBVEU0RAptYXQ0IHJvdGF0ZTRkKGluIHZlYzMgYSwgaW4gZmxvYXQgcikgewogICAgYSA9IG5vcm1hbGl6ZShhKTsKICAgIGZsb2F0IHMgPSBzaW4ocik7CiAgICBmbG9hdCBjID0gY29zKHIpOwogICAgZmxvYXQgb2MgPSAxLjAgLSBjOwogICAgcmV0dXJuIG1hdDQob2MgKiBhLnggKiBhLnggKyBjLCAgICAgICAgICAgb2MgKiBhLnggKiBhLnkgLSBhLnogKiBzLCAgb2MgKiBhLnogKiBhLnggKyBhLnkgKiBzLCAgMC4wLAogICAgICAgICAgICAgICAgb2MgKiBhLnggKiBhLnkgKyBhLnogKiBzLCAgb2MgKiBhLnkgKiBhLnkgKyBjLCAgICAgICAgICAgb2MgKiBhLnkgKiBhLnogLSBhLnggKiBzLCAgMC4wLAogICAgICAgICAgICAgICAgb2MgKiBhLnogKiBhLnggLSBhLnkgKiBzLCAgb2MgKiBhLnkgKiBhLnogKyBhLnggKiBzLCAgb2MgKiBhLnogKiBhLnogKyBjLCAgICAgICAgICAgMC4wLAogICAgICAgICAgICAgICAgMC4wLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMS4wKTsKfQojZW5kaWYKCgojaWZuZGVmIEZOQ19ST1RBVEUKI2RlZmluZSBGTkNfUk9UQVRFCnZlYzIgcm90YXRlKGluIHZlYzIgdiwgaW4gZmxvYXQgciwgaW4gdmVjMiBjKSB7CiAgICByZXR1cm4gcm90YXRlMmQocikgKiAodiAtIGMpICsgYzsKfQp2ZWMyIHJvdGF0ZShpbiB2ZWMyIHYsIGluIGZsb2F0IHIpIHsKICAgICNpZmRlZiBDRU5URVJfMkQKICAgIHJldHVybiByb3RhdGUodiwgciwgQ0VOVEVSXzJEKTsKICAgICNlbHNlCiAgICByZXR1cm4gcm90YXRlKHYsIHIsIHZlYzIoLjUpKTsKICAgICNlbmRpZgp9CnZlYzIgcm90YXRlKHZlYzIgdiwgdmVjMiB4X2F4aXMpIHsKICAgICNpZmRlZiBDRU5URVJfMkQKICAgIHYgLT0gQ0VOVEVSXzJEOwogICAgI2VuZGlmCiAgICB2ZWMyIHJ0YSA9IHZlYzIoIGRvdCh2LCB2ZWMyKC14X2F4aXMueSwgeF9heGlzLngpKSwgZG90KHYsIHhfYXhpcykgKTsKICAgICNpZmRlZiBDRU5URVJfMkQKICAgIHJ0YSArPSBDRU5URVJfMkQ7CiAgICAjZW5kaWYKICAgIHJldHVybiBydGE7Cn0KdmVjMyByb3RhdGUoaW4gdmVjMyB2LCBpbiBmbG9hdCByLCBpbiB2ZWMzIGF4aXMsIGluIHZlYzMgYykgewogICAgcmV0dXJuIChyb3RhdGU0ZChheGlzLCByKSAqIHZlYzQodiAtIGMsIDEuKSkueHl6ICsgYzsKfQp2ZWMzIHJvdGF0ZShpbiB2ZWMzIHYsIGluIGZsb2F0IHIsIGluIHZlYzMgYXhpcykgewogICAgI2lmZGVmIENFTlRFUl8zRAogICAgcmV0dXJuIHJvdGF0ZSh2LCByLCBheGlzLCBDRU5URVJfM0QpOwogICAgI2Vsc2UKICAgIHJldHVybiByb3RhdGUodiwgciwgYXhpcywgdmVjMygwLikpOwogICAgI2VuZGlmCn0KdmVjNCByb3RhdGUoaW4gdmVjNCB2LCBpbiBmbG9hdCByLCBpbiB2ZWMzIGF4aXMsIGluIHZlYzQgYykgewogICAgcmV0dXJuIHJvdGF0ZTRkKGF4aXMsIHIpICogKHYgLSBjKSArIGM7Cn0KdmVjNCByb3RhdGUoaW4gdmVjNCB2LCBpbiBmbG9hdCByLCBpbiB2ZWMzIGF4aXMpIHsKICAgICNpZmRlZiBDRU5URVJfNEQKICAgIHJldHVybiByb3RhdGUodiwgciwgYXhpcywgQ0VOVEVSXzREKTsKICAgICNlbHNlCiAgICByZXR1cm4gcm90YXRlKHYsIHIsIGF4aXMsIHZlYzQoMC4pKTsKICAgICNlbmRpZgp9CiNpZiBkZWZpbmVkKEZOQ19RVUFUTVVMVCkKdmVjMyByb3RhdGUoUVVBVCBxLCB2ZWMzIHYpIHsKICAgIFFVQVQgcV9jID0gUVVBVCgtcS54LCAtcS55LCAtcS56LCBxLncpOwogICAgcmV0dXJuIHF1YXRNdWwocSwgcXVhdE11bCh2ZWM0KHYsIDApLCBxX2MpKS54eXo7Cn0KdmVjMyByb3RhdGUoUVVBVCBxLCB2ZWMzIHYsIHZlYzMgYykgewogICAgdmVjMyBkaXIgPSB2IC0gYzsKICAgIHJldHVybiBjICsgcm90YXRlKHEsIGRpcik7Cn0KI2VuZGlmCiNlbmRpZgoKCgogICAgdmVjMyBoYXNoM0QodmVjMiB4KQoKICAgIHsKCiAgICAgICAgLy8gYmFzZWQgb246IHBjZzMgYnkgTWFyayBKYXJ6eW5za2k6IGh0dHA6Ly93d3cuamNndC5vcmcvcHVibGlzaGVkLzAwMDkvMDMvMDIvCgogICAgICAgIHV2ZWMzIHYgPSB1dmVjMyh4Lnh5eCAqIDY1NTM2LjApICogMTY2NDUyNXUgKyAxMDEzOTA0MjIzdTsKCiAgICAgICAgdiArPSB2Lnl6eCAqIHYuenh5OwoKICAgICAgICB2IF49IHYgPj4gMTZ1OwoKCgogICAgICAgIHYueCArPSB2LnkgKiB2Lno7CgogICAgICAgIHYueSArPSB2LnogKiB2Lng7CgogICAgICAgIHYueiArPSB2LnggKiB2Lnk7CgogICAgICAgIHJldHVybiB2ZWMzKHYpICogKDEuMCAvIGZsb2F0KDB4ZmZmZmZmZmZ1KSk7CgogICAgfQoKICAgIAoKICAgIHZvaWQgc3RhdGljTm9pc2UodmVjMyBjb2xvciwgZmxvYXQgc2NhbGUsIGZsb2F0IGRpc3RyaWJ1dGlvbiwgZmxvYXQgcm90YXRpb24sIGJvb2wgcmFuZG9tX29wYWNpdHksIGJvb2wgcmFuZG9tX3JvdGF0aW9uLCBib29sIG11bHRpY29sb3IpewoKICAgICAgICB2ZWMyIHN0ID0gZ2xfRnJhZ0Nvb3JkLnh5IC8gdV9yZXNvbHV0aW9uLng7CgogICAgICAgIHN0ICo9IHVfcmVzb2x1dGlvbiAvIHNjYWxlOyAvLyBTY2FsZSB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0KCgoKICAgICAgICB2ZWMyIGlwb3MgPSBmbG9vcihzdCk7ICAvLyBnZXQgdGhlIGludGVnZXIgY29vcmRzCgogICAgICAgIHZlYzIgZnBvcyA9IGZyYWN0KHN0KTsgIC8vIGdldCB0aGUgZnJhY3Rpb25hbCBjb29yZHMKCiAgICAgICAgc3QgPSBmcG9zOwoKCgogICAgICAgIC8vIFVzZSBhIG1hdHJpeCB0byByb3RhdGUgdGhlIHNwYWNlCgogICAgICAgIGlmIChyYW5kb21fcm90YXRpb24gPT0gdHJ1ZSkgewoKICAgICAgICAgICAgcm90YXRpb24gPSByYW5kKGlwb3MpICogMzYwLjsKCiAgICAgICAgfQoKICAgICAgICBzdCA9IHJvdGF0ZShzdCwgcm90YXRpb24gKiBQSS8xODAuKTsKCgoKICAgICAgICAvLyBvcGFjaXR5CgogICAgICAgIGZsb2F0IG9wYWNpdHkgPSAxLjA7CgogICAgICAgIGlmIChyYW5kb21fb3BhY2l0eSA9PSB0cnVlKSB7CgogICAgICAgICAgICBvcGFjaXR5ID0gcmFuZChpcG9zICogdV9yYW5kb21fc2VlZCk7CgogICAgICAgIH0KCgoKICAgICAgICAvLyBhbW91bnQgb2YgdmlzaWJsZSBmcmFnbWVudHMKCiAgICAgICAgZmxvYXQgYW10ID0gaGFzaDNEKGhhc2gzRChpcG9zKS54eSkueDsKCgoKICAgICAgICAvLyB2aWduZXR0ZQoKICAgICAgICB2ZWMyIGNlbnRlciA9IHZlYzIodV9yZXNvbHV0aW9uIC8gc2NhbGUqMC41IC0gMC41KTsKCiAgICAgICAgZmxvYXQgZGlzdCA9IGRpc3RhbmNlKGlwb3MsY2VudGVyKTsKCiAgICAgICAgZmxvYXQgdiA9ICgxLjAgLSAoZGlzdC9jZW50ZXIueCoodV92aWduZXR0ZSkpKTsKCiAgICAgICAgb3BhY2l0eSAqPSBwb3codiwyMC4pOwoKCgogICAgICAgIC8vIHJhbmRvbSBjb2xvcgoKICAgICAgICBpZiAodV9jb2xvcl9yYW5kb20gPT0gdHJ1ZSl7CgogICAgICAgICAgICBjb2xvciA9IGhhc2gzRChpcG9zKTsKCiAgICAgICAgfQoKCgogICAgICAgIC8vIHNoYXBlCgogICAgICAgIGZsb2F0IHNoYXBlID0gMS47CgogICAgICAgIAoKICAgICAgICAvLyBzcXVhcmUKCiAgICAgICAgaWYodV9zaGFwZVswXSl7CgogICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlYzMoY29sb3IpLHN0ZXAoMS4wIC0gZGlzdHJpYnV0aW9uLGFtdCkgKiBvcGFjaXR5KTsKCiAgICAgICAgfQoKCgogICAgICAgIC8vIGNpcmNsZQoKICAgICAgICBpZih1X3NoYXBlWzFdKXsKCiAgICAgICAgICAgIHNoYXBlID0gZmlsbChjaXJjbGVTREYoc3QpLDEuMCk7CgogICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlYzMoY29sb3IpLHN0ZXAoMS4wIC0gZGlzdHJpYnV0aW9uLGFtdCkgKiBvcGFjaXR5ICogc2hhcGUpOwoKICAgICAgICB9CgoKCiAgICAgICAgLy8gdHJpYW5nbGUKCiAgICAgICAgaWYodV9zaGFwZVsyXSl7CgogICAgICAgICAgICBzaGFwZSA9IGZpbGwodHJpU0RGKHN0KSwxLjApOwoKICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGNvbG9yKSxzdGVwKDEuMCAtIGRpc3RyaWJ1dGlvbixhbXQpICogb3BhY2l0eSAqIHNoYXBlKTsKCiAgICAgICAgfQoKCgogICAgICAgIC8vIGRpYW1vbmQKCiAgICAgICAgaWYodV9zaGFwZVszXSl7CgogICAgICAgICAgICBzaGFwZSA9IGZpbGwocmVjdFNERihyb3RhdGUoc3QsNDUuICogUEkvMTgwLiksdmVjMigwLjcxKSksMS4wKTsKCiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMyhjb2xvciksc3RlcCgxLjAgLSBkaXN0cmlidXRpb24sYW10KSAqIG9wYWNpdHkgKiBzaGFwZSk7CgogICAgICAgIH0KCgoKICAgICAgICAvLyBsaW5lCgogICAgICAgIGlmKHVfc2hhcGVbNF0pewoKICAgICAgICAgICAgc2hhcGUgPSBmaWxsKGxpbmVTREYoc3QsdmVjMigxLjApLHZlYzIoMC4wKSksKHVfcmVzb2x1dGlvbi54IC8gc2NhbGUpKjAuMDAxKTsKCiAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMyhjb2xvciksc3RlcCgxLjAgLSBkaXN0cmlidXRpb24sYW10KSAqIG9wYWNpdHkgKiBzaGFwZSk7CgogICAgICAgIH0KCgoKICAgICAgICAvLyBjcm9zcwoKICAgICAgICBpZih1X3NoYXBlWzVdKXsKCiAgICAgICAgICAgIHNoYXBlID0gZmlsbChjcm9zc1NERihzdCwxLjApLDEuMCk7CgogICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlYzMoY29sb3IpLHN0ZXAoMS4wIC0gZGlzdHJpYnV0aW9uLGFtdCkgKiBvcGFjaXR5ICogc2hhcGUpOwoKICAgICAgICB9CgoKCiAgICAgICAgLy8gaW1hZ2UKCiAgICAgICAgaWYodV9zaGFwZVs2XSl7CgogICAgICAgICAgICBmbG9hdCB2aXMgPSBhc3BlY3RTY2FsZShzdCwgdV9zaGFwZV9pbWFnZV9yZXNvbHV0aW9uLngsIHVfc2hhcGVfaW1hZ2VfcmVzb2x1dGlvbi55KTsKCiAgICAgICAgICAgIHZlYzQgaW1hZ2UgPSB2ZWM0KDEuMCk7CgogICAgICAgICAgICBpbWFnZSA9IHRleHR1cmUyRCh1X3NoYXBlX2ltYWdlLCBzdCk7CgogICAgICAgICAgICBpbWFnZS5hICo9IHN0ZXAoMS4wIC0gZGlzdHJpYnV0aW9uLGFtdCkgKiB2aXMgKiBvcGFjaXR5OwoKICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gaW1hZ2U7CgogICAgICAgIH0KCiAgICAgICAgCgogICAgfQoKCgogICAgdm9pZCBtYWluKCkgewoKICAgICAgICBzdGF0aWNOb2lzZSh1X2NvbG9yLCB1X3NpemUsIHVfYW1vdW50LCB1X3JvdGF0aW9uLCB1X29wYWNpdHlfcmFuZG9tLCB1X3JvdGF0aW9uX3JhbmRvbSwgdV9jb2xvcl9yYW5kb20pOwoKICAgIH0KCmAsCiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXI6IGAKICAgICAgICAgICAgdm9pZCBtYWluKCkgewogICAgICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNChwb3NpdGlvbiwgMS4wKTsKICAgICAgICB9YCwKICAgICAgICAgICAgICAgIHVuaWZvcm1zOiB7dV9zaXplOiB7dmFsdWU6IDF9LHVfYW1vdW50OiB7dmFsdWU6IDAuMTI1fSx1X3ZpZ25ldHRlOiB7dmFsdWU6IDB9LHVfb3BhY2l0eV9yYW5kb206IHt2YWx1ZTogdHJ1ZX0sdV9yYW5kb21fc2VlZDoge3ZhbHVlOiAwLjc1Mjc1MjM3NTQyNzE1NzR9LHVfc2hhcGU6IHt2YWx1ZTogW3RydWUsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2VdfSx1X3NoYXBlX2ltYWdlOiB7dmFsdWU6IHt9fSx1X3JvdGF0aW9uOiB7dmFsdWU6IDB9LHVfcm90YXRpb25fcmFuZG9tOiB7dmFsdWU6IGZhbHNlfSx1X2NvbG9yX3JhbmRvbToge3ZhbHVlOiBmYWxzZX0sdV9hYV9wYXNzZXM6IHt2YWx1ZTogMn0sdV90aW1lOiB7dmFsdWU6IDB9LHVfbW91c2U6IHt2YWx1ZTogWzAsMF19LHVfcmVzb2x1dGlvbjoge3ZhbHVlOiBbMjQwLDU4MF19fSwKICAgICAgICAgICAgICAgIHdpcmVmcmFtZTogZmFsc2UsIAogICAgICAgICAgICAgICAgd2lyZWZyYW1lTGluZXdpZHRoOiAwLAogICAgICAgICAgICAgICAgZGl0aGVyaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgIGZsYXRTaGFkaW5nOiB0cnVlLAogICAgICAgICAgICAgICAgZG91YmxlU2lkZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBnbHNsVmVyc2lvbjogIjEwMCIKICAgICAgICAgICAgfSkKICAgICAgICApOyAgCiAgICB9CgogICAgUmVhY3RET00ucmVuZGVyKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FudmFzLHsKICAgICAgICAgICAgZ2w6IHsKICAgICAgICAgICAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogdHJ1ZSwKICAgICAgICAgICAgICAgIHByZW11bHRpcGxpZWRBbHBoYTogZmFsc2UsCiAgICAgICAgICAgICAgICBhbHBoYTogdHJ1ZSwKICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICAgICAgYW50aWFsaWFzOiB0cnVlLAogICAgICAgICAgICAgICAgcHJlY2lzaW9uOiAiaGlnaHAiLAogICAgICAgICAgICAgICAgcG93ZXJQcmVmZXJlbmNlOiAiaGlnaC1wZXJmb3JtYW5jZSIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVzaXplOnsKICAgICAgICAgICAgICAgIGRlYm91bmNlOiAwLAogICAgICAgICAgICAgICAgc2Nyb2xsOiBmYWxzZSwKICAgICAgICAgICAgICAgIG9mZnNldFNpemU6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZHByOiAxLAogICAgICAgICAgICBjYW1lcmE6IHsKICAgICAgICAgICAgICAgIGZvdjogNzUsCiAgICAgICAgICAgICAgICBuZWFyOiAwLjEsCiAgICAgICAgICAgICAgICBmYXI6IDEwMDAsCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogWzAsMCw1XQogICAgICAgICAgICB9LAogICAgICAgICAgICBzdHlsZTp7IGhlaWdodDogIjEwMCUiLCB3aWR0aDogIjEwMCUiIH0KICAgICAgICB9LAogICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGV4dHVyZU1lc2gpICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICApLCBlbWJlZFJvb3QpOwo8L3NjcmlwdD4KICAgICAgICA8L2hlYWQ+CiAgICAgICAgPGJvZHk+CjwhLS0gQVNTRVQgTk9UIElOTElORUQ6IGFzc2V0cy9ib29rLjVmYjExYjhkLnN2ZyAtLT4KCjwhLS0gQVNTRVQgTk9UIElOTElORUQ6IGFzc2V0cy9seWdpYS5mNzQ5MDU5NC5zdmcgLS0+Cgo8IS0tIEFTU0VUIE5PVCBJTkxJTkVEOiBhc3NldHMvb3ZlcmZsb3cuOGQ1MDQxNWQuc3ZnIC0tPgoKPCEtLSBBU1NFVCBOT1QgSU5MSU5FRDogYXNzZXRzL3RyYXNoLjUyNGRiY2QzLnN2ZyAtLT4KCjwhLS0gQVNTRVQgTk9UIElOTElORUQ6IGFzc2V0cy92ZXJ0aWNhbC45MDYxMDg0OS5zdmcgLS0+Cgo8IS0tIEFTU0VUIE5PVCBJTkxJTkVEOiBhc3NldHMvaG9yaXpvbnRhbC40NGY3NzFmOC5zdmcgLS0+Cgo8IS0tIEFTU0VUIE5PVCBJTkxJTkVEOiBhc3NldHMvYWRkLmE1NTI0MGRkLnN2ZyAtLT4KCjwhLS0gQVNTRVQgTk9UIElOTElORUQ6IGFzc2V0cy9zaWcuODUwYTg1ZTcuc3ZnIC0tPgoKPCEtLSBBU1NFVCBOT1QgSU5MSU5FRDogYXNzZXRzL21pbnVzLjFlMWEwYWJkLnN2ZyAtLT4KCjwhLS0gQVNTRVQgTk9UIElOTElORUQ6IGFzc2V0cy9lZmZlY3QuNDU1NzI0M2Yuc3ZnIC0tPgoKPCEtLSBBU1NFVCBOT1QgSU5MSU5FRDogYXNzZXRzL3Zpc2libGUuYzZkNGUxYzAuc3ZnIC0tPgoKPCEtLSBBU1NFVCBOT1QgSU5MSU5FRDogYXNzZXRzL2hpZGRlbi41YTRmYzI1NC5zdmcgLS0+Cgo8IS0tIEFTU0VUIE5PVCBJTkxJTkVEOiBhc3NldHMvd29ya2VyLmI3NjFmYjExLmpzIC0tPgo8L2JvZHk+CiAgICAgICAgPC9odG1sPg=="
  style={{ border: 0, margin: 0, width: 3840, height: 2160 }}
/>;
